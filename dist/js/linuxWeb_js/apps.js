apps={terminal:{name:"linuxWEB Terminal",path:"apps.terminal",version:"1.0.4",icon:"./img/terminal.svg",createData:{title:"Terminal",bodyColor:"black",textColor:"white",bodyBorder:!1,bodyBorderSize:"0px",opacity:.9,padding:"10px 5px",getHTML:function(){return"\n                <terminal_main >linuxWEB terminal version 1.0.3<br></terminal_main>\n\t\t\t\t<terminal_input >linuxWEB@root:-$ <input type=text></terminal_input>\n\t\t\t\t"},methods:{commandHistory:[],currentHistoryNumber:-1,currentCommand:"",onFocus:function(){let e=this.getProcessElementBody().querySelector("terminal_input > input");document.activeElement!=e&&e.focus()},addToCommandHistory:function(e){this.commandHistory.length>30&&this.commandHistory.pop(),this.commandHistory.unshift(e)}}},InitiateVariables:function(e=null){return null!=e&&{body:e.getProcessElementBody(),main:e.getProcessElementBody().querySelector("terminal_main"),inputPrefix:e.getProcessElementBody().querySelector("terminal_input"),input:terminalInput=e.getProcessElementBody().querySelector("terminal_input > input")}},onStart:function(e){console.log("onStart Initialized: ",e),terminalElement=this.InitiateVariables(e),terminalElement.input.setAttribute("onkeydown",this.path+`.parseCommand(event,this,processes.pid[${e.id}])`)},parseCommand:async function(e,t,n){if(e.code.includes("Enter")){let e=this.InitiateVariables(n),i=t.value;t.value="",e.main.innerHTML+=`${system.global.escapeHtml(e.inputPrefix.innerText)} ${system.global.escapeHtml(i)}<br>`;try{n.currentHistoryNumber=-1,commandExecuted=system.cli.i(i),console.log(commandExecuted),"undefined"!=typeof commandExecuted&&("object"==typeof commandExecuted&&(commandExecuted=JSON.stringify(commandExecuted)),commandExecuted=system.global.escapeHtml(commandExecuted.toString()).replace(/\n/g,"<br>").replaceAll("    ","&emsp;"),e.main.innerHTML+=commandExecuted+"<br>")}catch(t){e.main.innerHTML+=t+"<br>"}n.addToCommandHistory(i),t.scrollIntoView(!1)}else"ArrowUp"==e.code?(-1==n.currentHistoryNumber&&(n.currentCommand=t.value),this.getFromCommandHistory(n,1)):"ArrowDown"==e.code&&this.getFromCommandHistory(n,-1)},getFromCommandHistory:function(e,t){let n=e.commandHistory[e.currentHistoryNumber+t];if(e.currentHistoryNumber+t<-1)return!1;terminalElement=apps.terminal.InitiateVariables(e),null!=n?(terminalElement.input.value=n,e.currentHistoryNumber=e.currentHistoryNumber+t):e.currentHistoryNumber>e.currentHistoryNumber+t&&(terminalElement.input.value=e.currentCommand,e.currentHistoryNumber=-1),setTimeout(()=>{terminalElement.input.selectionStart=terminalElement.input.selectionEnd=terminalElement.input.value.length},0)}},settings:{name:"Settings",icon:"./img/settings.svg",layout:{selected:0,0:{name:"About",iconTag:"about_icon",getPanelHTML:function(){return`\n                    <h1>About</h1>\n                    <hr>\n                    <span>Build: ${system.build}</span>\n                    <div>Most icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div>\n                `}},1:{name:"Appearance",iconTag:"appearance_icon",getPanelHTML:function(){return"\n                    <h1>Appearance Settings</h1>\n                    <hr>\n                "}},2:{name:"Desktop",iconTag:"desktop_icon",getPanelHTML:function(){return"\n                    <h1>Desktop Settings</h1>\n                    <hr>\n                "}},3:{name:"Sound",iconTag:"volume_icon",getPanelHTML:function(){return"\n                    <h1>Sound Settings</h1>\n                    <hr>\n                "}},4:{name:"User",iconTag:"user_icon",getPanelHTML:function(){return"\n                    <h1>User Settings</h1>\n                    <hr>\n                "}}},createData:{title:"Settings",fullHeight:!0,fullWidth:!0,minWidth:500,minHeight:500,headerBorderBottomColor:"var(--main-color)",onlyOneInstanceAllowed:!0,getHTML:function(){return`<settings><sidebarMenu>${Object.entries(apps.settings.layout).map(e=>([menuItemId,menuItem]=[e[0],e[1]],"object"!=typeof menuItem?"":`<menuItem ${apps.settings.layout.selected==menuItemId&&"class='selected'"} onclick='apps.settings.switchToPanel(${menuItemId},false,this)'><${menuItem.iconTag}></${menuItem.iconTag}>${menuItem.name}</menuItem>`)).join("")}</sidebarMenu><panel>${apps.settings.switchToPanel(0,!0)}</panel></settings>`}},switchToPanel:function(e,t=!1,n){let i=this.layout[e].getPanelHTML();return t?i:(document.querySelectorAll("settings .selected").forEach(e=>e.classList.remove("selected")),document.querySelector("settings > panel").innerHTML=i,n.classList.add("selected"),!0)}},google:{name:"Google Website",createData:{title:"Google Search",fullHeight:!0,fullWidth:!0,minWidth:1e3,minHeight:500,getHTML:function(){return"<iframe style='height:100%;' src=\"https://www.google.com/webhp?igu=1\"></iframe>"}}},notepad:{name:"Notepad",icon:"./img/notepad.svg",createData:{title:"Notepad - Untitled Document",fullWidth:!0,fullHeight:!0,getHTML:function(){return"<textarea></textarea>"},methods:{onFocus:function(){let e=this.getProcessElementBody().querySelector("textarea");document.activeElement!=e&&e.focus()}}}}};