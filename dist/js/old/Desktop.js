function desktopContextMenu(){document.getElementById("desktopContextMenu").style.display="block"}function clear(){return TCO="Martin@root : ",document.getElementById("terminal-context").value="",""}function launchTerminal(){document.getElementById("TerminalBody").style.display="inline-block",document.getElementById("terminal-context").style.opacity="1"}function closeTerminal(){TCMD="",TCO="Martin@root : ",pl=1,document.getElementById("TerminalBody").style="display:none; top:30px; ;left:10px;",document.getElementById("terminal-context").value="Martin@root : "}TCO="Martin@root : ",PREVCMD_array=["",""],pl=1,printSCR=print,console.oldLog=console.log,console.log=function(e){return console.oldLog(e),""+e},print=console.log,$(document).bind("contextmenu",(function(e){e.preventDefault(),$(".desktopContextMenu").finish().toggle(100).css({top:e.pageY+"px",left:e.pageX+"px"})})),$(document).bind("mousedown",(function(e){!$(e.target).parents(".desktopContextMenu").length>0&&$(".desktopContextMenu").hide(100)}));var windowDrag={move:function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},startMoving:function(e,t,n){var l=(n=n||window.event).clientX,o=n.clientY,i=e.style.top,a=e.style.left,r=parseInt(e.style.width),c=parseInt(e.style.height),m=parseInt(document.getElementById(t).style.width),d=parseInt(document.getElementById(t).style.height);i=i.replace("px","");var u=l-(a=a.replace("px","")),s=o-i;document.onmousemove=function(t){var n=(t=t||window.event).clientX,l=t.clientY,o=n-u,i=l-s;o<0&&(o=0),i<0&&(i=0),o+r>m&&(o=m-r),i+c>d&&(i=d-c),console.log(e+" - "+o+":"+i+":"+n+":"+l),windowDrag.move(e,o,i)}},stopMoving:function(e){document.createElement("script"),document.onmousemove=function(){}}};function formatTextArea(e){}window.onload=function(){var textArea=document.getElementById("terminal-context");textArea.onkeyup=function(evt){if(evt=evt||window.event,13==evt.keyCode){terminal_cmd=document.getElementById("terminal-context").value,TCMD=terminal_cmd.split(TCO)[1].replace("\n",""),this.value=TCO+TCMD;try{null==typeof eval(TCMD)||void 0===eval(TCMD)?document.getElementById("terminal-context").value+="\n"+TCMD+" is undefined\n":document.getElementById("terminal-context").value+="\n"+eval(TCMD)+"\n"}catch(e){document.getElementById("terminal-context").value+="\n"+e+"\n"}PREVCMD_array.push(TCMD),pl=PREVCMD_array.length-1,formatTextArea(this),this.value+="Martin@root : ",TCO=this.value,this.scrollTo(0,this.scrollHeight)}else 38==evt.keyCode?(this.value=TCO+PREVCMD_array[pl],pl>0&&(pl-=1)):40==evt.keyCode&&(this.value=TCO+PREVCMD_array[pl],pl>=PREVCMD_array.length&&(pl+=1))}},setTimeout((function(){$(".desktopContextMenu div").click((function(){switch($(this).attr("data-action")){case"new":alert("New");break;case"view":alert("view");break;case"sort":alert("sort");break;case"terminal":launchTerminal()}$(".desktopContextMenu").hide(100)}))}),1e3),setInterval((function(){document.getElementById("terminal-context").value.indexOf(TCO)<=-1&&(document.getElementById("terminal-context").value=TCO)}),100),setInterval((function(){terminalH=Number(document.getElementById("terminal-context").style.height.split("px")[0]),terminalW=Number(document.getElementById("terminal-context").style.width.split("px")[0]),document.getElementById("terminal-context").style.height==terminalH&&document.getElementById("terminal-context").style.width==terminalW||(document.getElementById("TerminalBody").style.width=terminalW+5+"px",document.getElementById("TerminalBody").style.height=terminalH+17+"px",document.getElementById("Terminal-titlebar").style.width=terminalW+5+"px")}),50);